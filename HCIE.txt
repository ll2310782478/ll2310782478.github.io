OSPF特征：
支持区域认证和接口认证；
区域认证>接口认证
采用触发更新，可使用路由标记tag对外部路由进行跟踪，便于监控和控制.
默认，OSPF优先级为10，OSPF AS外部优先级为150
OSPF路由采用开销作为度量标准。默认，接口开销=参考带宽/接口带宽。
OSPF维护邻居表、链路状态数据库和路由表。
为确保链路状态数据库同步，OSPF每隔30分钟进行链路状态刷新。

OSPF术语：
链路状态：链路指路由器上的一个接口。
	链路的类型
	接口ip地址及掩码
	链路上所连接的邻居路由器
	链路的带宽（开销）
所有链路状态信息构成链路状态数据库（lsdb)

区域（area）：以接口为单位划分区域，在同一区域内的路由器具有相同的OSPF链路状态数据库。每个区域都维护一个独立的lsdb
Area0是骨干区域，其他区域都必须与此区域相连。

自治系统：采用同一种路由协议交换路由信息的路由器及其网络构成一个自治系统。

链路状态通告（LSA）：LSA用来描述路由器和链路的状态，路由器自身产生和收到的LSA的集合就形成了链路状态数据库。

最短路径优先（SPF）算法：是OSPF路由协议的基础。SPF也称Dijkstra算法。是Dijkstra发明的。spf算法以计算每一个路由器作为根独立的计算其到每一个目的网络的最佳路由。

OSPF路由器ID：运行OSPF路由器的唯一标识，长度为32比特格式和IP地址相同。
路由器ID可以手动配置也可以自动生成。
如果没有手动配置routerID，则路由器使用Loopback接口中最大的IP地址作为RouterID
如果没有配置LoopbackID，则使用路由器物理接口中最大的IP作为RouterID。
RouterID重新配置后，可通过重置OSPF进程来更新RouterID。

OSPF报文封装在IP报文中，协议号为89
OSPF报文有五种：
	hello：邻居的发现，建立，保持（通过keepalive机制检测邻居运行状态）。 
	DD（数据库描述报文（摘要））：向邻居描述本地数据库，使邻居路由器识别出数据库的LSA是否完整。
	LSR（链路状态请求报文）：根据邻居的DD报文，判断本地数据库是否完整，如不完整，路由器把这些LSA记录进链路状态请求列表，然后发送一个LSR给邻居路由器。
	LSU（链路状态更新报文）：用来相应邻居路由器发来的LSR，根据对应的LSA给邻居路由。
	LSACK（链路状态确认报文）：用来对收到的LSA进行确认，保证同步过程的可靠性；一个LSAck报文可对多个LSA进行确认。

OSPF邻居关系和邻接关系建立

OSPF DR和BDR：
MA网络中的问题：
	n*（n-1）/2个邻接关系，管理复杂。
	重复的LSA泛洪，造成资源浪费。

DR与BDR作用：
DR负责在MA网络建立和维护邻接关系并负责LSA的同步。
DR与其他所有路由器形成邻接关系并交换链路状态信息。
其他路由器之间不直接交换链路状态信息。
减少MA网络中的邻接关系数量及交换链路状态信息消耗的资源。
BDR在DR失效时快速接管DR的工作。
伪节点是一个虚拟设备节点。

选举规则：DR/BDR的选举是基于接口的，而不具有抢占性。
接口的DR优先级越大越优先，范围0-255
DR优先级相等时，routerID大的优先。

DR重选条件：
路由器重新启动
删除OSPF配置，然后再重新配置OSPF
参与选举的路由器执行reset ospf process命令
DR出现故障
将DR OSPF接口优先级设置为0

OSPF区域划分和路由器类型：
OSPF支持将一组网段组合在一起，这样的一个组合称为一个区域。
OSPF区域采用两级结构。
划分区域后，可以在区域边界路由器上进行路由聚合，以减少通告到其他区域的LSA数量和路由表大小，进而提高路由查找效率，还可以将网络拓扑变化带来的影响最小化。
每个区域都维护一个独立的LSDB，同一区域的LSDB相同。
Area 0为骨干区域，为了避免区域间路由环路，非骨干区域之间不允许直接相互发布路由信息。因此，每个区域都必须连接到骨干区域。




